import{d1 as u,cc as l,u as f,r as i,j as o,b as Q,d2 as U,x as V,d3 as m,$ as S,c as W}from"./index-DWDHrirZ.js";var x=e=>{const s=W();return i.useMemo(()=>{var a;const t=(a=s.state)==null?void 0:a.restore_params;return t?`${e}?${t.toString()}`:e},[s.state,e])},F=({form:e,blockSearchParams:s=!1,children:n,onClose:t})=>{const{t:a}=Q(),{formState:{isDirty:p}}=e,r=U(({currentLocation:c,nextLocation:g})=>{const{isSubmitSuccessful:y}=g.state||{};if(y)return t==null||t(!0),!1;const h=c.pathname!==g.pathname,z=c.search!==g.search;if(s){const J=p&&(h||z);return h&&(t==null||t(y)),J}const G=p&&h;return h&&(t==null||t(y)),G}),v=()=>{var c;(c=r==null?void 0:r.reset)==null||c.call(r)},d=()=>{var c;(c=r==null?void 0:r.proceed)==null||c.call(r),t==null||t(!1)};return o.jsxs(V,{...e,children:[n,o.jsx(m,{open:r.state==="blocked",variant:"confirmation",children:o.jsxs(m.Content,{children:[o.jsxs(m.Header,{children:[o.jsx(m.Title,{children:a("general.unsavedChangesTitle")}),o.jsx(m.Description,{children:a("general.unsavedChangesDescription")})]}),o.jsxs(m.Footer,{children:[o.jsx(m.Cancel,{onClick:v,type:"button",children:a("actions.cancel")}),o.jsx(m.Action,{onClick:d,type:"button",children:a("actions.continue")})]})]})})]})},j=i.createContext(null),D=({prev:e,children:s})=>{const n=f(),[t,a]=i.useState(!0),p=i.useCallback(v=>{n(v||e,{replace:!0,state:{isSubmitSuccessful:!0}})},[n,e]),r=i.useMemo(()=>({handleSuccess:p,setCloseOnEscape:a,__internal:{closeOnEscape:t}}),[p,a,t]);return o.jsx(j.Provider,{value:r,children:s})},M=i.createContext(null),C=({children:e,onOpenChange:s})=>{const[n,t]=i.useState({}),a=d=>n[d]||!1,p=(d,c)=>{t(g=>({...g,[d]:c})),s(c)},r=d=>{t(c=>({...c,[d]:!1}))},v=d=>{t(c=>{const g={...c};return delete g[d],g})};return o.jsx(M.Provider,{value:{getIsOpen:a,setIsOpen:p,register:r,unregister:v},children:e})},k=()=>{const e=i.useContext(M);if(!e)throw new Error("useStackedModal must be used within a StackedModalProvider");return e},X=({prev:e="..",children:s})=>{const n=f(),[t,a]=i.useState(!1),[p,r]=i.useState(!1),v=x(e);i.useEffect(()=>(a(!0),()=>{a(!1),r(!1)}),[]);const d=c=>{if(!c){document.body.style.pointerEvents="auto",n(v,{replace:!0});return}a(c)};return o.jsx(l,{open:t,onOpenChange:d,children:o.jsx(D,{prev:v,children:o.jsx(C,{onOpenChange:r,children:o.jsx(l.Content,{"aria-describedby":void 0,className:S({"!bg-ui-bg-disabled !inset-y-5 !right-5":p}),children:s})})})})},Y=l.Header,Z=l.Title,L=l.Description,ee=l.Body,te=l.Footer,ae=l.Close,re=F,Se=Object.assign(X,{Header:Y,Title:Z,Body:ee,Description:L,Footer:te,Close:ae,Form:re}),se=()=>{const e=i.useContext(j);if(!e)throw new Error("useRouteModal must be used within a RouteModalProvider");return e},oe=({prev:e="..",children:s})=>{const n=f(),[t,a]=i.useState(!1),[p,r]=i.useState(!1),v=x(e);i.useEffect(()=>(a(!0),()=>{a(!1),r(!1)}),[]);const d=c=>{if(!c){document.body.style.pointerEvents="auto",n(v,{replace:!0});return}a(c)};return o.jsx(u,{open:t,onOpenChange:d,children:o.jsx(D,{prev:v,children:o.jsx(C,{onOpenChange:r,children:o.jsx(ne,{stackedModalOpen:p,children:s})})})})},ne=({stackedModalOpen:e,children:s})=>{const{__internal:n}=se(),t=!n.closeOnEscape;return o.jsx(u.Content,{onEscapeKeyDown:t?a=>{a.preventDefault()}:void 0,className:S({"!bg-ui-bg-disabled !inset-x-5 !inset-y-3":e}),children:s})},ce=u.Header,ie=u.Title,de=u.Description,le=u.Footer,ue=u.Body,pe=u.Close,ve=F,ye=Object.assign(oe,{Header:ce,Title:ie,Body:ue,Description:de,Footer:le,Close:pe,Form:ve}),ge=({id:e,children:s})=>{const{register:n,unregister:t,getIsOpen:a,setIsOpen:p}=k();return i.useEffect(()=>(n(e),()=>t(e)),[]),o.jsx(l,{open:a(e),onOpenChange:r=>p(e,r),children:s})},O=l.Close;O.displayName="StackedDrawer.Close";var T=l.Header;T.displayName="StackedDrawer.Header";var N=l.Body;N.displayName="StackedDrawer.Body";var w=l.Trigger;w.displayName="StackedDrawer.Trigger";var b=l.Footer;b.displayName="StackedDrawer.Footer";var B=l.Title;B.displayName="StackedDrawer.Title";var R=l.Description;R.displayName="StackedDrawer.Description";var E=i.forwardRef(({className:e,...s},n)=>o.jsx(l.Content,{ref:n,className:S(e),overlayProps:{className:"bg-transparent"},...s}));E.displayName="StackedDrawer.Content";var fe=Object.assign(ge,{Close:O,Header:T,Body:N,Content:E,Trigger:w,Footer:b,Description:R,Title:B}),me=({id:e,onOpenChangeCallback:s,children:n})=>{const{register:t,unregister:a,getIsOpen:p,setIsOpen:r}=k();i.useEffect(()=>(t(e),()=>a(e)),[]);const v=d=>{r(e,d),s==null||s(d)};return o.jsx(u,{open:p(e),onOpenChange:v,children:n})},H=u.Close;H.displayName="StackedFocusModal.Close";var P=u.Header;P.displayName="StackedFocusModal.Header";var I=u.Body;I.displayName="StackedFocusModal.Body";var _=u.Trigger;_.displayName="StackedFocusModal.Trigger";var $=u.Footer;$.displayName="StackedFocusModal.Footer";var A=u.Title;A.displayName="StackedFocusModal.Title";var K=u.Description;K.displayName="StackedFocusModal.Description";var q=i.forwardRef(({className:e,...s},n)=>o.jsx(u.Content,{ref:n,className:S("!top-6",e),overlayProps:{className:"bg-transparent"},...s}));q.displayName="StackedFocusModal.Content";var xe=Object.assign(me,{Close:H,Header:P,Body:I,Content:q,Trigger:_,Footer:$,Description:K,Title:A});export{ye as R,xe as S,k as a,Se as b,fe as c,se as u};
