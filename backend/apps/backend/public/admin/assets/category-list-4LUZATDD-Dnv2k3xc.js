import{T as c,a as z}from"./chunk-MSDRGCRR-C4NWyAOR.js";import{u as P}from"./chunk-RMSECWPK-zmSefLYH.js";import{g as N,a as E,b as w}from"./chunk-54IEHX46-DWMq7yL7.js";import{S as p}from"./chunk-ADOCJB6L-BseWnaO-.js";import{a as S,j as e,b as g,aE as H,C as q,H as A,_ as m,B as h,L as f,r as v,f as b,k as D,$ as j,W as I,aL as R,A as k,P as L,T as M}from"./index-DWDHrirZ.js";import{u as B,_ as $}from"./chunk-B2JT2FOA-Cbe-dvAK.js";import"./chunk-GJUPECDU-BYgcQfoi.js";import{S as O}from"./chunk-2RQLKDBF-CDnut6-E.js";import{u as Q}from"./chunk-C76H5USB-NCOnWWho.js";import"./chunk-P3UUX2T6-CaWQm6pZ.js";import"./chunk-YEDAFXMB-D3NQ1V8j.js";import"./chunk-M3VFKDXJ-Cfhvqd45.js";import"./chunk-AOFGTNG6-C8nbIVVz.js";import"./chunk-EMIHDNB7-B9umjuAU.js";import"./chunk-PFKKVLZX-DzM2ADPA.js";import"./Trans-CSxUpODi.js";var d=b(),W=()=>{const{t:a}=g();return v.useMemo(()=>[d.accessor("name",{header:()=>e.jsx(c,{text:a("fields.name")}),cell:({getValue:s,row:t})=>{const i=t.getToggleExpandedHandler();if(t.original.parent_category!==void 0){const r=N(t.original);return e.jsx("div",{className:"flex size-full items-center gap-1 overflow-hidden",children:r.map((n,o)=>e.jsxs("div",{className:j("overflow-hidden",{"text-ui-fg-muted flex items-center gap-x-1":o!==r.length-1}),children:[e.jsx(m,{size:"small",leading:"compact",className:"truncate",children:n.name}),o!==r.length-1&&e.jsx(m,{size:"small",leading:"compact",children:"/"})]},n.id))})}return e.jsxs("div",{className:"flex size-full items-center gap-x-3 overflow-hidden",children:[e.jsx("div",{className:"flex size-7 items-center justify-center",children:t.getCanExpand()?e.jsx(I,{type:"button",onClick:r=>{r.stopPropagation(),r.preventDefault(),i()},size:"small",variant:"transparent",className:"text-ui-fg-subtle",children:e.jsx(R,{className:j({"rotate-90 transition-transform will-change-transform":t.getIsExpanded()})})}):null}),e.jsx("span",{className:"truncate",children:s()})]})}}),d.accessor("handle",{header:()=>e.jsx(c,{text:a("fields.handle")}),cell:({getValue:s})=>e.jsx(z,{text:`/${s()}`})}),d.accessor("is_active",{header:()=>e.jsx(c,{text:a("fields.status")}),cell:({getValue:s})=>{const{color:t,label:i}=E(s(),a);return e.jsx(p,{color:t,children:i})}}),d.accessor("is_internal",{header:()=>e.jsx(c,{text:a("categories.fields.visibility.label")}),cell:({getValue:s})=>{const{color:t,label:i}=w(s(),a);return e.jsx(p,{color:t,children:i})}})],[a])},G=({pageSize:a=20,prefix:s})=>{const t=Q(["q","offset","order"],s),i={q:t.q,limit:a,offset:t.offset?Number(t.offset):0,order:t.order};return{raw:t,searchParams:i}},u=20,Z=()=>{const{t:a}=g(),{raw:s,searchParams:t}=G({pageSize:u}),i=s.q?{include_ancestors_tree:!0,fields:"id,name,handle,is_active,is_internal,parent_category",...t}:{include_descendants_tree:!0,parent_category_id:"null",fields:"id,name,category_children,handle,is_internal,is_active",...t},{product_categories:r,count:n,isLoading:o,isError:y,error:_}=H({...i},{placeholderData:D}),x=K(),{table:C}=B({data:r||[],columns:x,count:n,getRowId:l=>l.id,getSubRows:l=>l.category_children,enableExpandableRows:!0,pageSize:u}),T=!!r&&r.length>0;if(y)throw _;return e.jsxs(q,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:a("categories.domain")}),e.jsx(m,{className:"text-ui-fg-subtle",size:"small",children:a("categories.subtitle")})]}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[T&&e.jsx(h,{size:"small",variant:"secondary",asChild:!0,children:e.jsx(f,{to:"organize",children:a("categories.organize.action")})}),e.jsx(h,{size:"small",variant:"secondary",asChild:!0,children:e.jsx(f,{to:"create",children:a("actions.create")})})]})]}),e.jsx($,{table:C,columns:x,count:n,pageSize:u,isLoading:o,navigateTo:l=>l.id,queryObject:s,search:!0,pagination:!0})]})},F=({category:a})=>{const{t:s}=g(),t=P(a);return e.jsx(k,{groups:[{actions:[{label:s("actions.edit"),icon:e.jsx(L,{}),to:`${a.id}/edit`}]},{actions:[{label:s("actions.delete"),icon:e.jsx(M,{}),onClick:t}]}]})},J=b(),K=()=>{const a=W();return v.useMemo(()=>[...a,J.display({id:"actions",cell:({row:s})=>e.jsx(F,{category:s.original})})],[a])},me=()=>{const{getWidgets:a}=S();return e.jsx(O,{widgets:{after:a("product_category.list.after"),before:a("product_category.list.before")},hasOutlet:!0,children:e.jsx(Z,{})})};export{me as Component};
